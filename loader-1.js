var LoyaltyLionLoader=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=93)}([function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",function(){return n})},function(t,e,r){t.exports=r(90)},function(t,e,r){"use strict";function n(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,s,"next",t)}function s(t){n(a,o,i,c,s,"throw",t)}c(void 0)})}}r.d(e,"a",function(){return o})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",function(){return n})},function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"c",function(){return i}),r.d(e,"b",function(){return a}),r.d(e,"f",function(){return c}),r.d(e,"e",function(){return s}),r.d(e,"d",function(){return u}),r.d(e,"g",function(){return f});var n=r(15),o=function(){var t=navigator.userAgent||"",e=navigator.vendor||"";return window.opera?/Mini/i.test(t)?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Chrome/i.test(t)?"Chrome":/Apple/i.test(e)?/Mobile/i.test(t)?"Mobile Safari":"Safari":/Android/i.test(t)?"Android Mobile":/Konqueror/i.test(t)?"Konqueror":/Firefox/i.test(t)?"Firefox":/MSIE/i.test(t)?"Internet Explorer":/Gecko/i.test(t)?"Mozilla":""},i=function(){var t=navigator.userAgent;return/Windows/i.test(t)?/Phone/i.test(t)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/i.test(t)?"iOS":/Mac/i.test(t)?"macOS":/Android/i.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Linux/i.test(t)?"Linux":""},a=function(){var t=navigator.userAgent;return/iPhone/.test(t)?"iPhone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Windows Phone/i.test(t)?"Windows Phone":/Android/.test(t)?"Android":""},c=function(t){return t?0===t.search("https?://(.*)google.([^/?]*)")?"google":0===t.search("https?://(.*)bing.com")?"bing":0===t.search("https?://(.*)yahoo.com")?"yahoo":0===t.search("https?://(.*)duckduckgo.com")?"duckduckgo":"":""},s=function(t){if(!t)return"";var e=t.split("/");return e.length>=3?e[2]:""};var u=function(t){return new URLSearchParams(window.location.search).get(t)},f=function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipEmptyValues,r=void 0!==e&&e,o=new URLSearchParams,i=0,a=Object.keys(t);i<a.length;i++){var c=a[i],s=t[c];void 0===s||r&&!s||o.append(c,s)}return 0===Object(n.a)(o.entries()).length?"":"?"+o.toString()}},function(t,e,r){"use strict";var n=r(0),o=r(1),i=r.n(o),a=r(2),c=function(t,e){return e=e||{},new Promise(function(r,n){var o=new XMLHttpRequest,i=[],a=[],c={},s=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:s,headers:{keys:function(){return i},entries:function(){return a},get:function(t){return c[t.toLowerCase()]},has:function(t){return t.toLowerCase()in c}}}};for(var u in o.open(e.method||"get",t,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(t,e,r){i.push(e=e.toLowerCase()),a.push([e,r]),c[e]=c[e]?c[e]+","+r:r}),r(s())},o.onerror=n,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(u,e.headers[u]);o.send(e.body||null)})},s=r(4);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach(function(e){Object(n.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(t,e){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(i.a.mark(function t(e,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.fetch){t.next=2;break}return t.abrupt("return",window.fetch(e,r));case 2:return t.prev=2,t.next=5,c(e,r);case 5:return t.abrupt("return",t.sent);case 8:throw t.prev=8,t.t0=t.catch(2),new TypeError("unfetch failed with unspecified network error");case 11:case"end":return t.stop()}},t,null,[[2,8]])}))).apply(this,arguments)}function h(){return(h=Object(a.a)(i.a.mark(function t(e){var r,n,o=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=r.query,t.abrupt("return",l(y(e,n),{method:"get"}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function d(){return(d=Object(a.a)(i.a.mark(function t(e){var r,n,o,a,c,s,u=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n=r.query,o=r.body,a=r.json,c=r.headers,s=void 0===c?{}:c,t.abrupt("return",l(y(e,n),{method:"post",headers:f({},s,{},a?{"content-type":"application/json"}:{}),body:o||(a?JSON.stringify(a):null)}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}r.d(e,"a",function(){return v});var v={get:function(t){return h.apply(this,arguments)},post:function(t){return d.apply(this,arguments)}};function y(t,e){return t+(e?Object(s.g)(e):"")}},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}r.d(e,"a",function(){return o})},function(t,e){var r="object",n=function(t){return t&&t.Math==Math&&t};t.exports=n(typeof globalThis==r&&globalThis)||n(typeof window==r&&window)||n(typeof self==r&&self)||n(typeof global==r&&global)||Function("return this")()},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(7),o=r(20),i=r(39),a=r(70),c=n.Symbol,s=o("wks");t.exports=function(t){return s[t]||(s[t]=a&&c[t]||(a?c:i)("Symbol."+t))}},function(t,e,r){"use strict";(function(t){r.d(e,"a",function(){return c});var n=r(3),o=r(6),i=r(0),a=r(5),c=new(function(){function e(){Object(n.a)(this,e),Object(i.a)(this,"_host",t.env.METRICS_HOST)}return Object(o.a)(e,[{key:"initialize",value:function(t){var e=t.host;this._host=e}},{key:"track",value:function(t){if(!Array.isArray(t)||0!==t.length){var e="https://".concat(this.host,"/analytics/metric/increment");a.a.post(e,{json:{metrics:Array.isArray(t)?t:[t]}}).catch(function(){})}}},{key:"trackPageComponent",value:function(t,e){this.track(t.map(function(t){return{name:s(t),site_id:e}}))}},{key:"host",get:function(){if(!this._host)throw new Error("Metrics must be initialized before use");return this._host}}]),e}());function s(t){switch(t.attribute){case"refer":return"page_component.refer";case"account-link":return"page_component.account_link";case"loyaltyWidget":return"page_component.loyalty_widget";case"checkoutSlider":return"page_component.checkout_slider";case"account":return"page_component.account";case"history-table":return"page_component.history_table";case"claimed-rewards-list":return"page_component.claimed_rewards_list";case"points":return"page_component.points";case"points-for":return"page_component.points_for";case"points-for-id":return"page_component.points_for_id";case"points-for-product-id":return"page_component.points_for_product_id";case"points-for-rule":return"page_component.points_for_rule";case"referral-url":return"page_component.referral_url";case"rewards-list":return"page_component.rewards_list";case"rules-list":return"page_component.rules_list";case"seamless-product-reward":return"page_component.seamless_product_reward";case"seamless-product-reward-widget":return"page_component.seamless_product_reward_widget";case"current-tier-name":return"page_component.current_tier_name";case"tier-overview":return"page_component.tier_overview";case"tier-benefits-compare":return"page_component.tier_benefits_compare";case"tier-rewards-compare":return"page_component.tier_rewards_compare";case"tier-rules-compare":return"page_component.tier_rules_compare";case"powered-by":return"page_component.powered_by";case"integrated-page":return"page_component.integrated_page"}}}).call(this,r(53))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(16),o=r(18),i=r(24);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(13);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,r){"use strict";function n(t,e){return-1!==t.indexOf(e)}function o(t){if(Array.isArray(t))return t;for(var e,r,n=("string"==typeof t||"length"in t?(e=t,r=0,{next:function(){return{done:r>=e.length,value:e[r++]}}}):t),o=[];;){var i=n.next();if(i.done)break;o.push(i.value)}return o}r.d(e,"b",function(){return n}),r.d(e,"a",function(){return o})},function(t,e,r){var n=r(11);t.exports=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(33),o=r(34);t.exports=function(t){return n(o(t))}},function(t,e,r){var n=r(16),o=r(36),i=r(14),a=r(35),c=Object.defineProperty;e.f=n?c:function(t,e,r){if(i(t),e=a(e,!0),i(r),o)try{return c(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(7),o=r(20),i=r(12),a=r(8),c=r(26),s=r(38),u=r(27),f=u.get,l=u.enforce,p=String(s).split("toString");o("inspectSource",function(t){return s.call(t)}),(t.exports=function(t,e,r,o){var s=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,f=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||a(r,"name")||i(r,"name",e),l(r).source=p.join("string"==typeof e?e:"")),t!==n?(s?!f&&t[e]&&(u=!0):delete t[e],u?t[e]=r:i(t,e,r)):u?t[e]=r:c(e,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&f(this).source||s.call(this)})},function(t,e,r){var n=r(7),o=r(26),i=r(21),a=n["__core-js_shared__"]||o("__core-js_shared__",{});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.2.0",mode:i?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e){t.exports={}},function(t,e,r){var n=r(7),o=r(32).f,i=r(12),a=r(19),c=r(26),s=r(59),u=r(66);t.exports=function(t,e){var r,f,l,p,h,d=t.target,v=t.global,y=t.stat;if(r=v?n:y?n[d]||c(d,{}):(n[d]||{}).prototype)for(f in e){if(p=e[f],l=t.noTargetGet?(h=o(r,f))&&h.value:r[f],!u(v?f:d+(y?".":"#")+f,t.forced)&&void 0!==l){if(typeof p==typeof l)continue;s(p,l)}(t.sham||l&&l.sham)&&i(p,"sham",!0),a(r,f,p,t)}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(7),o=r(12);t.exports=function(t,e){try{o(n,t,e)}catch(r){n[t]=e}return e}},function(t,e,r){var n,o,i,a=r(58),c=r(7),s=r(13),u=r(12),f=r(8),l=r(28),p=r(29),h=c.WeakMap;if(a){var d=new h,v=d.get,y=d.has,g=d.set;n=function(t,e){return g.call(d,t,e),e},o=function(t){return v.call(d,t)||{}},i=function(t){return y.call(d,t)}}else{var m=l("state");p[m]=!0,n=function(t,e){return u(t,m,e),e},o=function(t){return f(t,m)?t[m]:{}},i=function(t){return f(t,m)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!s(e)||(r=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},function(t,e,r){var n=r(20),o=r(39),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){t.exports={}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,r){var n=r(18).f,o=r(8),i=r(9)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){var n=r(16),o=r(57),i=r(24),a=r(17),c=r(35),s=r(8),u=r(36),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=a(t),e=c(e,!0),u)try{return f(t,e)}catch(t){}if(s(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,r){var n=r(11),o=r(25),i="".split;t.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var n=r(13);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(16),o=r(11),i=r(37);t.exports=!n&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(7),o=r(13),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,r){var n=r(20);t.exports=n("native-function-to-string",Function.toString)},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e,r){var n=r(61),o=r(7),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t])||i(o[t]):n[t]&&n[t][e]||o[t]&&o[t][e]}},function(t,e,r){var n=r(8),o=r(17),i=r(63).indexOf,a=r(29);t.exports=function(t,e){var r,c=o(t),s=0,u=[];for(r in c)!n(a,r)&&n(c,r)&&u.push(r);for(;e.length>s;)n(c,r=e[s++])&&(~i(u,r)||u.push(r));return u}},function(t,e,r){var n=r(43),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(45),o=r(33),i=r(46),a=r(42),c=r(68),s=[].push,u=function(t){var e=1==t,r=2==t,u=3==t,f=4==t,l=6==t,p=5==t||l;return function(h,d,v,y){for(var g,m,b=i(h),w=o(b),O=n(d,v,3),k=a(w.length),_=0,x=y||c,j=e?x(h,k):r?x(h,0):void 0;k>_;_++)if((p||_ in w)&&(m=O(g=w[_],_,b),t))if(e)j[_]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return _;case 2:s.call(j,g)}else if(f)return!1;return l?-1:u||f?f:j}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(t,e,r){var n=r(67);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(34);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(9),o=r(48),i=r(12),a=n("unscopables"),c=Array.prototype;null==c[a]&&i(c,a,o(null)),t.exports=function(t){c[a][t]=!0}},function(t,e,r){var n=r(14),o=r(71),i=r(30),a=r(29),c=r(73),s=r(37),u=r(28)("IE_PROTO"),f=function(){},l=function(){var t,e=s("iframe"),r=i.length;for(e.style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;r--;)delete l.prototype[i[r]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(f.prototype=n(t),r=new f,f.prototype=null,r[u]=t):r=l(),void 0===e?r:o(r,e)},a[u]=!0},function(t,e,r){"use strict";var n=r(50).IteratorPrototype,o=r(48),i=r(24),a=r(31),c=r(22),s=function(){return this};t.exports=function(t,e,r){var u=e+" Iterator";return t.prototype=o(n,{next:i(1,r)}),a(t,u,!1,!0),c[u]=s,t}},function(t,e,r){"use strict";var n,o,i,a=r(51),c=r(12),s=r(8),u=r(9),f=r(21),l=u("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(n=o):p=!0),null==n&&(n={}),f||s(n,l)||c(n,l,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},function(t,e,r){var n=r(8),o=r(46),i=r(28),a=r(81),c=i("IE_PROTO"),s=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),n(t,c)?t[c]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,r){var n=r(88),o=r(22),i=r(9)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n,o;e.nextTick=function(t){setTimeout(t,0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},o="/",e.cwd=function(){return o},e.chdir=function(t){n||(n=r(89)),o=n.resolve(t,o)},e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},function(t,e,r){(function(e){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,o=void 0,i=void 0,a=function(t,e){h[n]=t,h[n+1]=e,2===(n+=2)&&(i?i(d):b())},c="undefined"!=typeof window?window:void 0,s=c||{},u=s.MutationObserver||s.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(d,1)}}var h=new Array(1e3);function d(){for(var t=0;t<n;t+=2){(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0}n=0}var v,y,g,m,b=void 0;function w(t,e){var r=this,n=new this.constructor(_);void 0===n[k]&&F(n);var o=r._state;if(o){var i=arguments[o-1];a(function(){return R(o,n,i,r._result)})}else T(r,n,t,e);return n}function O(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(_);return A(e,t),e}f?b=function(){return e.nextTick(d)}:u?(y=0,g=new u(d),m=document.createTextNode(""),g.observe(m,{characterData:!0}),b=function(){m.data=y=++y%2}):l?((v=new MessageChannel).port1.onmessage=d,b=function(){return v.port2.postMessage(0)}):b=void 0===c?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(d)}:p()}catch(t){return p()}}():p();var k=Math.random().toString(36).substring(2);function _(){}var x=void 0,j=1,S=2,E={error:null};function P(t){try{return t.then}catch(t){return E.error=t,E}}function L(e,r,n){r.constructor===e.constructor&&n===w&&r.constructor.resolve===O?function(t,e){e._state===j?D(t,e._result):e._state===S?I(t,e._result):T(e,void 0,function(e){return A(t,e)},function(e){return I(t,e)})}(e,r):n===E?(I(e,E.error),E.error=null):void 0===n?D(e,r):t(n)?function(t,e,r){a(function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?A(t,r):D(t,r))},function(e){n||(n=!0,I(t,e))},t._label);!n&&o&&(n=!0,I(t,o))},t)}(e,r,n):D(e,r)}function A(t,e){var r,n;t===e?I(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?D(t,e):L(t,e,P(e)))}function C(t){t._onerror&&t._onerror(t._result),N(t)}function D(t,e){t._state===x&&(t._result=e,t._state=j,0!==t._subscribers.length&&a(N,t))}function I(t,e){t._state===x&&(t._state=S,t._result=e,a(C,t))}function T(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+j]=r,o[i+S]=n,0===i&&t._state&&a(N,t)}function N(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)n=e[a],o=e[a+r],n?R(r,n,o,i):o(i);t._subscribers.length=0}}function R(e,r,n,o){var i=t(n),a=void 0,c=void 0,s=void 0,u=void 0;if(i){if((a=function(t,e){try{return t(e)}catch(t){return E.error=t,E}}(n,o))===E?(u=!0,c=a.error,a.error=null):s=!0,r===a)return void I(r,new TypeError("A promises callback cannot return that same promise."))}else a=o,s=!0;r._state!==x||(i&&s?A(r,a):u?I(r,c):e===j?D(r,a):e===S&&I(r,a))}var M=0;function F(t){t[k]=M++,t._state=void 0,t._result=void 0,t._subscribers=[]}var U=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(_),this.promise[k]||F(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&D(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===O){var o=P(t);if(o===w&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===B){var i=new r(_);L(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===x&&(this._remaining--,t===S?I(n,r):this._result[e]=r),0===this._remaining&&D(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;T(t,void 0,function(t){return r._settledAt(j,e,t)},function(t){return r._settledAt(S,e,t)})},t}(),B=function(){function e(t){this[k]=M++,this._result=this._state=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){A(t,e)},function(e){I(t,e)})}catch(e){I(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return B.prototype.then=w,B.all=function(t){return new U(this,t).promise},B.race=function(t){var e=this;return r(t)?new e(function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},B.resolve=O,B.reject=function(t){var e=new this(_);return I(e,t),e},B._setScheduler=function(t){i=t},B._setAsap=function(t){a=t},B._asap=a,B.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=B},B.Promise=B,B},t.exports=r()}).call(this,r(53))},function(t,e,r){var n=r(91),o="?",i=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function a(){return null}function c(t){var e={};return e._stackFrame=t,e.url=t.fileName,e.line=t.lineNumber,e.func=t.functionName,e.column=t.columnNumber,e.args=t.args,e.context=null,e}function s(t){var e=t.constructor&&t.constructor.name;return(!e||!e.length||e.length<3)&&(e=t.name),{stack:function(){var e,r=[];if(t.stack)e=t;else try{throw t}catch(t){e=t}try{r=n.parse(e)}catch(t){r=[]}for(var o=[],i=0;i<r.length;i++)o.push(new c(r[i]));return o}(),message:t.message,name:e,rawStack:t.stack,rawException:t}}t.exports={guessFunctionName:function(){return o},guessErrorClass:function(t){if(!t||!t.match)return["Unknown error. There was no error message to display.",""];var e=t.match(i),r="(unknown)";return e&&(r=e[e.length-1],t=(t=t.replace((e[e.length-2]||"")+r+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[r,t]},gatherContext:a,parse:function(t){return new s(t)},Stack:s,Frame:c}},function(t,e,r){"use strict";var n=r(23),o=r(44).find,i=r(47),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n({target:"Array",proto:!0,forced:a},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(t,e,r){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(7),o=r(38),i=n.WeakMap;t.exports="function"==typeof i&&/native code/.test(o.call(i))},function(t,e,r){var n=r(8),o=r(60),i=r(32),a=r(18);t.exports=function(t,e){for(var r=o(e),c=a.f,s=i.f,u=0;u<r.length;u++){var f=r[u];n(t,f)||c(t,f,s(e,f))}}},function(t,e,r){var n=r(40),o=r(62),i=r(65),a=r(14);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(a(t)),r=i.f;return r?e.concat(r(t)):e}},function(t,e,r){t.exports=r(7)},function(t,e,r){var n=r(41),o=r(30).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e,r){var n=r(17),o=r(42),i=r(64),a=function(t){return function(e,r,a){var c,s=n(e),u=o(s.length),f=i(a,u);if(t&&r!=r){for(;u>f;)if((c=s[f++])!=c)return!0}else for(;u>f;f++)if((t||f in s)&&s[f]===r)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,r){var n=r(43),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(11),o=/#|\.prototype\./,i=function(t,e){var r=c[a(t)];return r==u||r!=s&&("function"==typeof e?n(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=i.data={},s=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){var n=r(13),o=r(69),i=r(9)("species");t.exports=function(t,e){var r;return o(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},function(t,e,r){var n=r(25);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(11);t.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},function(t,e,r){var n=r(16),o=r(18),i=r(14),a=r(72);t.exports=n?Object.defineProperties:function(t,e){i(t);for(var r,n=a(e),c=n.length,s=0;c>s;)o.f(t,r=n[s++],e[r]);return t}},function(t,e,r){var n=r(41),o=r(30);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(40);t.exports=n("document","documentElement")},function(t,e,r){var n=r(7),o=r(75),i=r(76),a=r(12);for(var c in o){var s=n[c],u=s&&s.prototype;if(u&&u.forEach!==i)try{a(u,"forEach",i)}catch(t){u.forEach=i}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){"use strict";var n=r(44).forEach,o=r(77);t.exports=o("forEach")?function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(t,e,r){"use strict";var n=r(11);t.exports=function(t,e){var r=[][t];return!r||!n(function(){r.call(null,e||function(){throw 1},1)})}},function(t,e,r){"use strict";r(79);var n=r(23),o=r(84),i=r(19),a=r(85),c=r(31),s=r(49),u=r(27),f=r(86),l=r(8),p=r(45),h=r(14),d=r(13),v=r(87),y=r(52),g=r(9)("iterator"),m=u.set,b=u.getterFor("URLSearchParams"),w=u.getterFor("URLSearchParamsIterator"),O=/\+/g,k=Array(4),_=function(t){return k[t-1]||(k[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},x=function(t){try{return decodeURIComponent(t)}catch(e){return t}},j=function(t){var e=t.replace(O," "),r=4;try{return decodeURIComponent(e)}catch(t){for(;r;)e=e.replace(_(r--),x);return e}},S=/[!'()~]|%20/g,E={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},P=function(t){return E[t]},L=function(t){return encodeURIComponent(t).replace(S,P)},A=function(t,e){if(e)for(var r,n,o=e.split("&"),i=0;i<o.length;)(r=o[i++]).length&&(n=r.split("="),t.push({key:j(n.shift()),value:j(n.join("="))}))},C=function(t){this.entries.length=0,A(this.entries,t)},D=function(t,e){if(t<e)throw TypeError("Not enough arguments")},I=s(function(t,e){m(this,{type:"URLSearchParamsIterator",iterator:v(b(t).entries),kind:e})},"Iterator",function(){var t=w(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),T=function(){f(this,T,"URLSearchParams");var t,e,r,n,o,i,a,c=arguments.length>0?arguments[0]:void 0,s=[];if(m(this,{type:"URLSearchParams",entries:s,updateURL:function(){},updateSearchParams:C}),void 0!==c)if(d(c))if("function"==typeof(t=y(c)))for(e=t.call(c);!(r=e.next()).done;){if((o=(n=v(h(r.value))).next()).done||(i=n.next()).done||!n.next().done)throw TypeError("Expected sequence with length 2");s.push({key:o.value+"",value:i.value+""})}else for(a in c)l(c,a)&&s.push({key:a,value:c[a]+""});else A(s,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},N=T.prototype;a(N,{append:function(t,e){D(arguments.length,2);var r=b(this);r.entries.push({key:t+"",value:e+""}),r.updateURL()},delete:function(t){D(arguments.length,1);for(var e=b(this),r=e.entries,n=t+"",o=0;o<r.length;)r[o].key===n?r.splice(o,1):o++;e.updateURL()},get:function(t){D(arguments.length,1);for(var e=b(this).entries,r=t+"",n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){D(arguments.length,1);for(var e=b(this).entries,r=t+"",n=[],o=0;o<e.length;o++)e[o].key===r&&n.push(e[o].value);return n},has:function(t){D(arguments.length,1);for(var e=b(this).entries,r=t+"",n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){D(arguments.length,1);for(var r,n=b(this),o=n.entries,i=!1,a=t+"",c=e+"",s=0;s<o.length;s++)(r=o[s]).key===a&&(i?o.splice(s--,1):(i=!0,r.value=c));i||o.push({key:a,value:c}),n.updateURL()},sort:function(){var t,e,r,n=b(this),o=n.entries,i=o.slice();for(o.length=0,r=0;r<i.length;r++){for(t=i[r],e=0;e<r;e++)if(o[e].key>t.key){o.splice(e,0,t);break}e===r&&o.push(t)}n.updateURL()},forEach:function(t){for(var e,r=b(this).entries,n=p(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<r.length;)n((e=r[o++]).value,e.key,this)},keys:function(){return new I(this,"keys")},values:function(){return new I(this,"values")},entries:function(){return new I(this,"entries")}},{enumerable:!0}),i(N,g,N.entries),i(N,"toString",function(){for(var t,e=b(this).entries,r=[],n=0;n<e.length;)t=e[n++],r.push(L(t.key)+"="+L(t.value));return r.join("&")},{enumerable:!0}),c(T,"URLSearchParams"),n({global:!0,forced:!o},{URLSearchParams:T}),t.exports={URLSearchParams:T,getState:b}},function(t,e,r){"use strict";var n=r(17),o=r(47),i=r(22),a=r(27),c=r(80),s=a.set,u=a.getterFor("Array Iterator");t.exports=c(Array,"Array",function(t,e){s(this,{type:"Array Iterator",target:n(t),index:0,kind:e})},function(){var t=u(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,r){"use strict";var n=r(23),o=r(49),i=r(51),a=r(82),c=r(31),s=r(12),u=r(19),f=r(9),l=r(21),p=r(22),h=r(50),d=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,y=f("iterator"),g=function(){return this};t.exports=function(t,e,r,f,h,m,b){o(r,e,f);var w,O,k,_=function(t){if(t===h&&P)return P;if(!v&&t in S)return S[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},x=e+" Iterator",j=!1,S=t.prototype,E=S[y]||S["@@iterator"]||h&&S[h],P=!v&&E||_(h),L="Array"==e&&S.entries||E;if(L&&(w=i(L.call(new t)),d!==Object.prototype&&w.next&&(l||i(w)===d||(a?a(w,d):"function"!=typeof w[y]&&s(w,y,g)),c(w,x,!0,!0),l&&(p[x]=g))),"values"==h&&E&&"values"!==E.name&&(j=!0,P=function(){return E.call(this)}),l&&!b||S[y]===P||s(S,y,P),p[e]=P,h)if(O={values:_("values"),keys:m?P:_("keys"),entries:_("entries")},b)for(k in O)!v&&!j&&k in S||u(S,k,O[k]);else n({target:e,proto:!0,forced:v||j},O);return O}},function(t,e,r){var n=r(11);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,r){var n=r(14),o=r(83);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return n(r),o(i),e?t.call(r,i):r.__proto__=i,r}}():void 0)},function(t,e,r){var n=r(13);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,r){var n=r(11),o=r(9),i=r(21),a=o("iterator");t.exports=!n(function(){var t=new URL("b?e=1","http://a"),e=t.searchParams;return t.pathname="c%20d",i&&!t.toJSON||!e.sort||"http://a/c%20d?e=1"!==t.href||"1"!==e.get("e")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash})},function(t,e,r){var n=r(19);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},function(t,e,r){var n=r(14),o=r(52);t.exports=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return n(e.call(t))}},function(t,e,r){var n=r(25),o=r(9)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:i?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){},function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n=f;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=u(t,e,r);if("normal"===s.type){if(n=r.done?h:l,s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=h,r.method="throw",r.arg=s.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f="suspendedStart",l="suspendedYield",p="executing",h="completed",d={};function v(){}function y(){}function g(){}var m={};m[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==r&&n.call(w,i)&&(m=w);var O=g.prototype=v.prototype=Object.create(m);function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function _(t){var e;this._invoke=function(r,o){function i(){return new Promise(function(e,i){!function e(r,o,i,a){var c=u(t[r],t,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?Promise.resolve(f.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(f).then(function(t){s.value=t,i(s)},function(t){return e("throw",t,i,a)})}a(c.arg)}(r,o,e,i)})}return e=e?e.then(i,i):i()}}function x(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=u(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return y.prototype=O.constructor=g,g.constructor=y,g[c]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},k(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,r,n,o){var i=new _(s(e,r,n,o));return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(O),O[c]="Generator",O[i]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){var n,o,i;!function(a,c){"use strict";o=[r(92)],void 0===(i="function"==typeof(n=function(t){var e=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;function o(t,e,r){if("function"==typeof Array.prototype.map)return t.map(e,r);for(var n=new Array(t.length),o=0;o<t.length;o++)n[o]=e.call(r,t[o]);return n}function i(t,e,r){if("function"==typeof Array.prototype.filter)return t.filter(e,r);for(var n=[],o=0;o<t.length;o++)e.call(r,t[o])&&n.push(t[o]);return n}return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(r))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=t.replace(/[\(\)\s]/g,"").split(":"),r=e.pop(),n=e[e.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var o=e.pop();return[e.join(":"),o,r]}return[e.join(":"),r,void 0]},parseV8OrIE:function(e){var n=i(e.stack.split("\n"),function(t){return!!t.match(r)},this);return o(n,function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),o=r.join(" ")||void 0,i="eval"===n[0]?void 0:n[0];return new t(o,void 0,i,n[1],n[2],e)},this)},parseFFOrSafari:function(e){var r=i(e.stack.split("\n"),function(t){return!t.match(n)},this);return o(r,function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var r=e.split("@"),n=this.extractLocation(r.pop()),o=r.shift()||void 0;return new t(o,void 0,n[0],n[1],n[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),o=[],i=2,a=n.length;i<a;i+=2){var c=r.exec(n[i]);c&&o.push(new t(void 0,void 0,c[2],c[1],void 0,n[i]))}return o},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),o=[],i=0,a=n.length;i<a;i+=2){var c=r.exec(n[i]);c&&o.push(new t(c[3]||void 0,void 0,c[2],c[1],void 0,n[i]))}return o},parseOpera11:function(r){var n=i(r.stack.split("\n"),function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this);return o(n,function(e){var r,n=e.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var c=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t(a,c,o[0],o[1],o[2],e)},this)}}})?n.apply(e,o):n)||(t.exports=i)}()},function(t,e,r){var n,o,i;!function(r,a){"use strict";o=[],void 0===(i="function"==typeof(n=function(){function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,r,n,o,i){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}},e})?n.apply(e,o):n)||(t.exports=i)}()},function(t,e,r){"use strict";r.r(e);r(56),r(74),r(78);var n=r(54),o=r.n(n),i=r(1),a=r.n(i),c=r(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(t)}function f(t){return"object"===u(t)&&"string"==typeof t._token&&2!==t.version}function l(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var p=r(3),h=r(6),d=r(0),v=r(4),y=r(55);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(r,!0).forEach(function(e){Object(d.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function b(t){var e,r=(e=t.customer)?{id:e.id,blocked:e.blocked,enrolled:e.enrolled}:{},n=m({},t.emailTracking,{emailTrackingId:""}),o=m({},t.shopify,{cart:null});return m({},t,{authPacket:"",customer:m({},r),emailTracking:n,shopify:o})}var w=r(5);function O(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return t.length>e?String(t):((e-=t.length)>r.length&&(r+=r.repeat(e/r.length)),r.slice(0,e)+String(t))}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(r,!0).forEach(function(e){Object(d.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var x="ee3eb2972eae4b2cb4ff3d987ccb32cb",j="https://api.rollbar.com/api/1/item/",S="production",E={items:[],add:function(t){this.items.push(t)},has:function(t){return this.items.some(function(e){return e.title===t.title})}};function P(t){return{filename:/loader.js/.test(t.url)?t.url.replace(/\?t.+$/,""):t.url,lineno:t.line,colno:t.column,method:t.func}}function L(t,e){return e&&e.err?e.err?function(t,e){var r=e.err,n=e.componentStack,o=e.state,i=(e.fingerprintType,l(e,["err","componentStack","state","fingerprintType"])),a=o?b(o):null;try{var c=Object(y.parse)(r),s=r.properties||{};return{trace:{frames:c?c.stack.map(P).reverse():[],exception:{class:r.name,message:r.message}},custom:_({},i,{},s,{err:r,componentStack:n,state:a})}}catch(e){return N.error(t,{originalError:r,parseError:e}),null}}(t,_({},e,{err:e.err})):void 0:function(t,e){e.componentStack;var r=e.state,n=l(e,["componentStack","state"]),o=r?b(r):null;return{message:{body:t},custom:_({},n,{componentStack:null==e?void 0:e.componentStack,state:o})}}(t,e)}function A(t,e){var r,n,o,i=null==e?void 0:e.customer;return{person:i?{id:String(i.id)}:{},client:{javascript:{browser:window.navigator.userAgent,code_version:t,source_map_enabled:!0}},custom:{revision:t,site_id:null==e?void 0:null===(r=e.site)||void 0===r?void 0:r.id,site_domain:null==e?void 0:null===(n=e.site)||void 0===n?void 0:n.domain,site_platform:null==e?void 0:null===(o=e.site)||void 0===o?void 0:o.platform,base_url:"".concat(window.location.protocol,"//").concat(window.location.host)}}}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x){var r=function(t){return t.revision?t.revision:t.state&&t.state.app.revision?t.state.app.revision:"unknown"}(e),n=L(t,e);if(n){var o=function(t,e){var r=e.err;if(!r)return t;var n="".concat(t," - ").concat(r.name||"Error");return r.message?"".concat(n,": ").concat(r.message):n}(t,e),i={access_token:x,data:_({},A(r,e.state),{environment:S,body:n,title:o,language:"javascript",level:"error",platform:"browser",code_version:r},"message"===e.fingerprintType?{fingerprint:o}:{})};(function(t){var e=t.title;return!(!e||!["Invariant Violation"].some(function(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(e,t)}))&&E.has(t)})(i.data)||(E.add(i.data),w.a.post(j,{json:i}).catch(function(){}))}}}var D="[LoyaltyLion SDK]";function I(){try{var t;return null!==Object(v.d)("LL_DEBUG")||Boolean(null!==(t=localStorage.getItem("loyaltylion_debug"))&&void 0!==t?t:sessionStorage.getItem("loyaltylion_debug"))}catch(t){return!1}}var T=I(),N=new(function(){function t(){Object(p.a)(this,t),Object(d.a)(this,"store",void 0)}return Object(h.a)(t,[{key:"initialize",value:function(t){this.store=t}},{key:"info",value:function(t){if(T){for(var e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(e=console).log.apply(e,["".concat(D," ").concat(t)].concat(n))}}},{key:"warn",value:function(t){if("function"==typeof console.warn){for(var e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(e=console).warn.apply(e,["".concat(D," ").concat(t)].concat(n))}}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.shouldRollbar,n=void 0===r||r,o=l(e,["shouldRollbar"]),i=o.err;console&&"function"==typeof console.error&&((null==o?void 0:o.consoleMessage)?console.error("".concat(D," ").concat(o.consoleMessage)):i&&I()?console.error("".concat(D," ").concat(t),o.err):console.error("".concat(D," ").concat(t))),!o.state&&this.store&&(o.state=this.store.getState()),n&&C(t,o)}}]),t}());function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?R(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}function Y(t,e,r){return(Y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&U(o,r.prototype),o}).apply(null,arguments)}function K(t){var e="function"==typeof Map?new Map:void 0;return(K=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Y(t,arguments,F(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),U(n,t)})(t)}var H=function(t){function e(){var t,r;Object(p.a)(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=M(this,(t=F(e)).call.apply(t,[this].concat(o))),Object(d.a)(R(r),"name","CannotCreateLoaderError"),r}return B(e,K(Error)),e}(),G=function(t){function e(){var t,r;Object(p.a)(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=M(this,(t=F(e)).call.apply(t,[this].concat(o))),Object(d.a)(R(r),"name","DuplicateLoaderError"),r}return B(e,K(Error)),e}();function q(t){if(Array.isArray(t))return t}function z(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function V(t,e){return q(t)||function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(t,e)||z()}var W=function(t){function e(){var t,r;Object(p.a)(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=M(this,(t=F(e)).call.apply(t,[this].concat(o))),Object(d.a)(R(r),"name","ConfigurationFetchError"),r}return B(e,K(Error)),e}(),J=r(10);function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(r,!0).forEach(function(e){Object(d.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function X(t){var e=t.token,r=t.revision,n=t.referrer,o=t.visitorId,i=t.authParams,a=i.customer,c=i.emailTrackingId,s=function(t){var e=t.auth,r=t.customer,n=t.jwt;if(!r)return null;var o={email:r.email,id:r.id};if(e)return Z({},o,{date:e.date,mac:e.token});if(n)return Z({},o,{date:(new Date).toISOString(),jwt:n});return null}(i);return Z({r:r||"",site_token:e,visitor_id:o,pageview_data:Q(tt(n,o)),properties:a?Q(et(a)):""},(null==a?void 0:a.id)?{cid:a.id.toString()}:{},{},s?{auth_packet:Q(s)}:{},{},c?{email_tracking_id:c}:{})}function Q(t){return function(t){if(!t)return t;if(t=encodeURIComponent(t),"function"==typeof window.btoa)return window.btoa(t);var e,r,n,o,i,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,s=0,u="",f=[];do{e=(i=t.charCodeAt(c++)<<16|t.charCodeAt(c++)<<8|t.charCodeAt(c++))>>18&63,r=i>>12&63,n=i>>6&63,o=63&i,f[s++]=a.charAt(e)+a.charAt(r)+a.charAt(n)+a.charAt(o)}while(c<t.length);switch(u=f.join(""),t.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}(JSON.stringify(t))}function tt(t,e){var r=window.screen,n=document.documentElement;return{context:{referrer:t,visitor_id:e,browser:Object(v.a)(),device:Object(v.b)(),os:Object(v.c)(),resolution:"".concat(r.width,"x").concat(r.height),viewport:n?"".concat(n.clientWidth,"x").concat(n.clientHeight):""},properties:{page:window.location.toString()},time:(new Date).getTime().toString()}}function et(t){t.id,t.email;return l(t,["id","email"])}function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(r,!0).forEach(function(e){Object(d.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ot(t){return it.apply(this,arguments)}function it(){return(it=Object(c.a)(a.a.mark(function t(e){var r,n,o,i,c,s,u,f,l,p,h;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.authParams,n=e.referrer,o=e.revision,i=e.sdkHost,c=e.token,s=e.visitorId,(u=X({token:c,revision:o,referrer:n,visitorId:s,authParams:r})).auth_packet||u.email_tracking_id){t.next=4;break}return t.abrupt("return",null);case 4:return t.prev=4,t.next=7,w.a.post("https://".concat(i,"/sdk/init"),{query:nt({},u)});case 7:if((l=t.sent).ok){t.next=12;break}return t.next=11,at(l,{revision:o,token:c});case 11:return t.abrupt("return",null);case 12:return t.next=14,l.json();case 14:if(p=t.sent,h=null!==(f="authPacket"in p?p.authPacket:null)&&void 0!==f?f:u.auth_packet,!("customer"in p&&h)){t.next=18;break}return t.abrupt("return",{customer:p.customer,authPacket:h});case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),st(t.t0,{revision:o,token:c});case 23:return t.abrupt("return",null);case 24:case"end":return t.stop()}},t,null,[[4,20]])}))).apply(this,arguments)}function at(t,e){return ct.apply(this,arguments)}function ct(){return(ct=Object(c.a)(a.a.mark(function t(e,r){var n,o,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.revision,o=r.token,!(e.status>=401&&e.status<=403)){t.next=8;break}return t.next=4,e.json();case 4:return"string"==typeof(i=t.sent).message&&(N.error(i.message,{shouldRollbar:!1}),N.error(ut("Could not authenticate customer"),{shouldRollbar:!1})),J.a.track({name:"platform_init.failed_to_authenticate_customer",client_revision:n,error_name:i.error,site_token:o}),t.abrupt("return");case 8:N.error("Platform init request failed with ".concat(e.status," status"),{consoleMessage:ut("Could not connect to the LoyaltyLion API"),status:e.status,revision:n,token:o});case 9:case"end":return t.stop()}},t)}))).apply(this,arguments)}function st(t,e){var r=e.revision,n=e.token;if("TypeError"===t.name)return N.error(ut("A network error occurred"),{shouldRollbar:!1}),void J.a.track({name:"platform_init.failed_to_authenticate_customer",client_revision:r,error_name:"network_error",site_token:n});N.error("Platform init request failed with unexpected error",{consoleMessage:ut("An unexpected error occurred"),err:t,shouldRollbar:!1})}function ut(t){return"".concat(t,". UI components may still render, but in guest mode only")}function ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ft(r,!0).forEach(function(e){Object(d.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ft(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function pt(t){for(var e=t+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var o=void 0;for(o=r[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))try{return JSON.parse(decodeURIComponent(o.substring(e.length,o.length)))}catch(t){return null}}return null}function ht(t,e,r){document.cookie=["".concat(t,"=").concat(encodeURIComponent(JSON.stringify(e))),r&&"expires=".concat(new Date(Date.now()+1e3*r).toUTCString())].join(";")}function dt(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e+=t[r]);return e?"".concat(3+16*e.length/8192," KB"):"Empty (0 KB)"}var vt=function(){function t(){Object(p.a)(this,t),Object(d.a)(this,"data",null)}return Object(h.a)(t,[{key:"load",value:function(t){if(this.data)throw new Error("Can only load data into an empty store. Found: "+JSON.stringify(this.data));this.data=t}},{key:"get",value:function(t){return this.assertInit(),this.data[t]}},{key:"set",value:function(t){this.assertInit(),this.data=lt({},this.data,{},t),this.saveData()}},{key:"delete",value:function(t){this.assertInit(),delete this.data[t],this.saveData()}},{key:"assertInit",value:function(){if(null===this.data)throw new Error("Call hydrate() or load() before using storage")}}]),t}(),yt=function(t){function e(){var t,r;Object(p.a)(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=M(this,(t=F(e)).call.apply(t,[this].concat(o))),Object(d.a)(R(r),"isLocalStorageUsable",function(){try{return localStorage.setItem("loyaltylion_localstorage_test","true"),localStorage.removeItem("loyaltylion_localstorage_test"),!0}catch(t){return!1}}()),r}return B(e,vt),Object(h.a)(e,[{key:"initialize",value:function(t,e){var r=this.getBackwardCompatibleData(e),n=this.fetchData();this.data=lt({},t,{},r,{},n,{referrer:lt({},t.referrer,{},r.referrer,{},null==n?void 0:n.referrer)}),this.saveData()}},{key:"fetchData",value:function(){if(!this.isLocalStorageUsable)return pt(e.KEY);var t=localStorage.getItem(e.KEY);if(null===t)return null;try{return JSON.parse(t)}catch(t){return null}}},{key:"saveData",value:function(){if(!window.__LION_EDIT_MODE__){if(this.isLocalStorageUsable)try{localStorage.setItem(e.KEY,JSON.stringify(this.data))}catch(t){this.isLocalStorageUsable=!1,N.error("failed to write to localStorage",{err:t,loyaltyLionKey:e.KEY,loyaltyLionData:JSON.stringify(this.data),numberStorageKeys:localStorage.length,revision:"c6af9b8",usedStorageSize:dt(localStorage)})}this.isLocalStorageUsable||ht(e.KEY,this.data,31536e3)}}},{key:"getBackwardCompatibleData",value:function(t){var e={},r=pt("ll_".concat(t));return r&&(r.visitor_id&&(e.visitorId=r.visitor_id),r.introduced&&(e.guestIntroductionShownAt=r.introduced),r.referrer&&(e.referrer={id:r.referrer.id,url:r.referrer.url,domain:r.referrer.domain,searchEngine:r.referrer.search_engine})),e}}]),e}();Object(d.a)(yt,"KEY","loyaltylion_persistent_data");var gt=function(t){function e(){var t,r;Object(p.a)(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=M(this,(t=F(e)).call.apply(t,[this].concat(o))),Object(d.a)(R(r),"isSessionStorageUsable",function(){try{return sessionStorage.setItem("loyaltylion_sessionstorage_test","true"),sessionStorage.removeItem("loyaltylion_sessionstorage_test"),!0}catch(t){return!1}}()),r}return B(e,vt),Object(h.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.data=lt({},t,{},this.fetchData()),this.saveData()}},{key:"fetchData",value:function(){if(!this.isSessionStorageUsable)return pt(e.KEY);var t=sessionStorage.getItem(e.KEY);if(null===t)return null;try{return JSON.parse(t)}catch(t){return null}}},{key:"saveData",value:function(){if(!window.__LION_EDIT_MODE__){if(this.isSessionStorageUsable)try{sessionStorage.setItem(e.KEY,JSON.stringify(this.data))}catch(t){this.isSessionStorageUsable=!1,N.error("failed to write to sessionStorage",{err:t,loyaltyLionKey:e.KEY,loyaltyLionData:JSON.stringify(this.data),numberStorageKeys:sessionStorage.length,revision:"c6af9b8",usedStorageSize:dt(sessionStorage)})}this.isSessionStorageUsable||ht(e.KEY,this.data)}}}]),e}();Object(d.a)(gt,"KEY","loyaltylion_temporary_data");var mt=new yt,bt=new gt,wt=function(t){function e(t){var r;if(Object(p.a)(this,e),r=M(this,F(e).call(this,"Failed to load remote resource")),Object(d.a)(R(r),"properties",void 0),r.name="ResourceLoadError","string"==typeof t)return M(r);try{var n=t.srcElement;n&&(r.properties={element:{attributes:Ot(n.attributes)}})}catch(t){}return r}return B(e,K(Error)),e}();function Ot(t){for(var e=[],r=0;r<t.length;r++){var n=t.item(r);n&&e.push({localName:n.localName,name:n.name,nodeName:n.nodeName,nodeValue:n.nodeValue,textContent:n.textContent,value:n.value})}return e}var kt=r(15);function _t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(n,o){for(var i=0,a=Object(kt.a)(document.querySelectorAll("link"));i<a.length;i++){var c=a[i];if(c.href===t)return n(c)}var s,u=document.querySelector("link, style");if(u)s=u;else{if(!document.head)return o(new Error("document.head not found"));s=document.head.firstElementChild}var f=function(t,e,r){var n,o=window.document,i=o.createElement("link");if(e)n=e;else{var a=(o.body||o.getElementsByTagName("head")[0]).childNodes;n=a[a.length-1]}var c=o.styleSheets;i.rel="stylesheet",i.href=t,i.media="only x",function t(e){if(o.body)return e();setTimeout(function(){t(e)})}(function(){n.parentNode.insertBefore(i,e?n:n.nextSibling)});var s=function t(e){for(var r=i.href,n=c.length;n--;)if(c[n].href===r)return e();setTimeout(function(){t(e)})};function u(){i.addEventListener&&i.removeEventListener("load",u),i.media=r||"all"}return i.addEventListener&&i.addEventListener("load",u),i.onloadcssdefined=s,s(u),i}(t,s);f.addEventListener("error",function(t){r.removeOnError&&f.parentNode&&f.parentNode.removeChild(f),o(new wt(t))}),Object.keys(e).forEach(function(t){return f.setAttribute(t,e[t])}),function(t,e){var r;function n(){!r&&e&&(r=!0,e.call(t))}t.addEventListener&&t.addEventListener("load",n),t.attachEvent&&t.attachEvent("onload",n),"isApplicationInstalled"in navigator&&"onloadcssdefined"in t&&t.onloadcssdefined(n)}(f,function(){n(f)})})}function xt(t){return new Promise(function(e,r){var n=document.createElement("script");if(n.src=t,n.addEventListener("load",function(){return e()}),n.addEventListener("error",function(t){r(new wt(t))}),!document.head)throw new Error("document.head not found");document.head.appendChild(n)})}var jt,St=function(){function t(e){Object(p.a)(this,t),this.authCallback=e,Object(d.a)(this,"customerData",null),Object(d.a)(this,"authData",null)}return Object(h.a)(t,[{key:"setCustomerData",value:function(){var t=Object(c.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.customerData=e,t.next=3,this.maybeAuthenticate();case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"setAuthData",value:function(){var t=Object(c.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.authData={date:e.date,token:e.auth_token},t.next=3,this.maybeAuthenticate();case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"maybeAuthenticate",value:function(){var t=Object(c.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==this.customerData&&null!==this.authData){t.next=2;break}return t.abrupt("return");case 2:if(this.authCallback){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.authCallback({customer:this.customerData,auth:this.authData});case 6:this.customerData=null,this.authData=null;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}();function Et(t,e,r,n,o){return"https://".concat(r,"/sdk/css/").concat(n,"/")+"".concat(t,"-").concat(e,"-").concat(o.slice(0,7),".css")}function Pt(t,e,r,n,o){return{name:t,revision:e,cssURL:Et(t,e,r,n,o)}}function Lt(t){return _t(t.cssURL,{"data-lion-css":t.name}).catch(function(t){throw t})}function At(t,e,r,n){return _t(function(t,e,r,n){return"https://".concat(t,"/sdk/css/custom/").concat(e,"/")+"".concat(r,"-").concat(n.slice(0,7),".css")}(t,e,r,n),{"data-lion-custom-css":r})}!function(){var t=window.crypto||window.msCrypto;if(!jt&&t&&t.getRandomValues)try{var e=new Uint8Array(16);(jt=function(){return t.getRandomValues(e),e})()}catch(t){}if(!jt){var r=new Array(16);jt=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}}();for(var Ct=[],Dt={},It=0;It<256;It++)Ct[It]=(It+256).toString(16).substr(1),Dt[Ct[It]]=It;var Tt=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||jt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;i++)e[n+i]=o[i];return e||function(t,e){var r=e||0,n=Ct;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}(o)};var Nt="Could not authenticate customer. UI components may still render, but in guest mode only";function Rt(t){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(c.a)(a.a.mark(function t(e){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.get("/customer/current.jwt",{query:{app_client_id:e}});case 3:if(!(r=t.sent).ok){t.next=8;break}return t.next=7,r.text();case 7:return t.abrupt("return",t.sent);case 8:if(!(r.status>=401&&r.status<=403)){t.next=11;break}return N.error("Could not authenticate with BigCommerce",{consoleMessage:Nt}),t.abrupt("return",null);case 11:N.error("BigCommerce JWT endpoint failed with ".concat(r.status," status"),{consoleMessage:Nt}),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}},t,null,[[0,14]])}))).apply(this,arguments)}function Ft(t,e){var r=t.getUTCFullYear().toString()+O((t.getUTCMonth()+1).toString(),2,"0")+O(t.getUTCDate().toString(),2,"0");switch(e){case"YYYYMMDD":return r;case"YYYYMMDDHH":return r+O(t.getUTCHours().toString(),2,"0")}}function Ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ut(r,!0).forEach(function(e){Object(d.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ut(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Yt=function(){function t(e){var r=this;if(Object(p.a)(this,t),Object(d.a)(this,"version",2),Object(d.a)(this,"isLoyaltyLion",!0),Object(d.a)(this,"clientBuffer",void 0),Object(d.a)(this,"bufferedClientConfiguration",void 0),Object(d.a)(this,"token",void 0),Object(d.a)(this,"revision",void 0),Object(d.a)(this,"themeManifest",void 0),Object(d.a)(this,"legacyCustomerAuthenticator",void 0),Object(d.a)(this,"clientInitData",void 0),Object(d.a)(this,"bufferedEventListeners",void 0),Object(d.a)(this,"bufferedClientCartStates",void 0),Object(d.a)(this,"bootstrapped",void 0),Object(d.a)(this,"authPacket",void 0),Object(d.a)(this,"customer",void 0),Object(d.a)(this,"sdkHost",void 0),Object(d.a)(this,"bigCommerceClientId",void 0),Object(d.a)(this,"platform",void 0),Object(d.a)(this,"lion",void 0),Object(d.a)(this,"setupPreviewEnabled",!1),this.clientBuffer=e._buffer,this.clientInitData=e._initData,!this.clientInitData.token)throw new Error("[LoyaltyLion] `lion.init` must be called with a valid site token");this.revision="c6af9b8",this.themeManifest={default:"7e31050"},this.fontManifest={"source-sans-pro-cyrillic-ext.woff2":"static/2/fonts/source-sans-pro-cyrillic-ext-4bdae25f76.woff2","source-sans-pro-cyrillic.woff2":"static/2/fonts/source-sans-pro-cyrillic-4faf0c2477.woff2","source-sans-pro-greek-ext.woff2":"static/2/fonts/source-sans-pro-greek-ext-3f3d22c3e3.woff2","source-sans-pro-greek.woff2":"static/2/fonts/source-sans-pro-greek-7dc64f3917.woff2","source-sans-pro-latin-ext.woff2":"static/2/fonts/source-sans-pro-latin-ext-5240c1e027.woff2","source-sans-pro-latin-ttf.ttf":"static/2/fonts/source-sans-pro-latin-ttf-123352716b.ttf","source-sans-pro-latin.woff":"static/2/fonts/source-sans-pro-latin-5cc3aae674.woff","source-sans-pro-latin.woff2":"static/2/fonts/source-sans-pro-latin-fbefd76e82.woff2","source-sans-pro-vietnamese.woff2":"static/2/fonts/source-sans-pro-vietnamese-667a19c01f.woff2"},this.bootstrapped=!1,this.bufferedClientConfiguration=[],this.bufferedEventListeners=[],this.bufferedClientCartStates=[],this.authPacket=null,this.customer=null,this.token=this.clientInitData.token,this.legacyCustomerAuthenticator=new St(function(){var t=Object(c.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.authenticateCustomer(e));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),function(t){mt.initialize(function(){var t,e=document.referrer;return{referrer:{domain:Object(v.e)(e)||"$direct",searchEngine:Object(v.f)(e),url:e||"$direct"},visitorId:null!==(t=Object(v.d)("ll_visitor_id"))&&void 0!==t?t:Tt(),orderIdentifiers:{}}}(),t);var e=mt.get("referrer"),r=Object(v.d)("ll_ref_id");r&&!e.id&&mt.set({referrer:Bt({},e,{id:r})});n=mt.get("visitorId"),/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(n)||mt.set({visitorId:Tt()});var n}(this.token),bt.initialize()}return Object(h.a)(t,[{key:"start",value:function(){var t=this;Object(v.d)("ll_preview")&&(this.setupPreviewEnabled=!0),this.clientBuffer.forEach(function(e){var r=V(e,2),n=r[0],o=r[1];"function"==typeof t[n]&&t[n].apply(t,o)})}},{key:"_push",value:function(t){return"configuration_v2"===t[0]?this.bootstrap(t[1]):"shutdown"===t[0]?this.shutdown():void 0}},{key:"configure",value:function(t){this.bufferedClientConfiguration.push(t)}},{key:"on",value:function(t,e,r){this.bufferedEventListeners.push([t,e,r])}},{key:"removeListener",value:function(t,e){this.bufferedEventListeners=this.bufferedEventListeners.filter(function(r){var n=V(r,2),o=n[0],i=n[1];return t===o&&e===i})}},{key:"setCartState",value:function(t){this.bufferedClientCartStates.push(t)}},{key:"bootstrap",value:function(){var t=Object(c.a)(a.a.mark(function t(e){var r,n,o,i,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.bootstrapped){t.next=2;break}return t.abrupt("return");case 2:return this.bootstrapped=!0,e&&e.config&&e.config.api&&e.config.sdkHost&&e.site||N.error("Invalid bootstrap data shape",{fingerprintType:"message",location:"beginning of bootstrap",data:e}),window.addEventListener("error",Ht),r=e.config,n=r.sdkHost,o=r.sdkStaticHost,this.sdkHost=n,this.platform=e.site.platform,this.bigCommerceClientId=e.config.bigCommerceClientId,J.a.initialize({host:e.config.platformHost}),t.prev=10,this.loadFonts(e),t.next=14,this.assertCorrectConfig(e);case 14:return i=t.sent,t.next=17,Promise.all([this.loadBundles(o||n,i),this.platformInit(this.clientInitData),this.loadStyles(n,e)]);case 17:if(!i){t.next=21;break}t.t0=i,t.next=24;break;case 21:return t.next=23,this.assertCorrectConfig(e);case 23:t.t0=t.sent;case 24:if(c=t.t0){t.next=28;break}return J.a.track(Bt({name:"reloaded_config_undefined",site_id:e.site.id,client_revision:this.revision},e.config.api?{api_revision:e.config.api.revision}:{})),t.abrupt("return");case 28:this.createLionInstance(c),t.next=36;break;case 31:t.prev=31,t.t1=t.catch(10),console.log(t.t1),J.a.track(Bt({name:"bootstrap-fail",site_id:e.site.id,error_name:t.t1.name,client_revision:this.revision},e.config.api?{api_revision:e.config.api.revision}:{})),Gt(t.t1,this.token,this.revision);case 36:return t.prev=36,setTimeout(function(){window.removeEventListener("error",Ht)},3e3),t.finish(36);case 39:case"end":return t.stop()}},t,this,[[10,31,36,39]])}));return function(e){return t.apply(this,arguments)}}()},{key:"shutdown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.setupPreviewEnabled&&t.sdkHost)return this.bootstrapForPreview(t.sdkHost);N.info("Shutting down SDK due to server signal")}},{key:"identify_customer",value:function(t){this.legacyCustomerAuthenticator.setCustomerData(t).catch(function(t){N.error("Legacy `identify_customer` failed",{err:t})})}},{key:"auth_customer",value:function(t){this.legacyCustomerAuthenticator.setAuthData(t).catch(function(t){N.error("Legacy `auth_customer` failed",{err:t})})}},{key:"identify_product",value:function(){}},{key:"track_pageview",value:function(){}},{key:"authenticateCustomer",value:function(){var t=Object(c.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.customer&&e.auth){t.next=2;break}throw new Error("`customer` and `auth` properties are required for initialization");case 2:if(!this.bootstrapped){t.next=4;break}return t.abrupt("return",this.platformInit(e));case 4:this.clientInitData=Bt({},this.clientInitData,{auth:e.auth,customer:e.customer});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"init",value:function(){throw new Error("Cannot call lion.init more than once. Please ensure there is only a single instance of the LoyaltyLion SDK snippet on the page")}},{key:"bootstrapForPreview",value:function(){var t=Object(c.a)(a.a.mark(function t(e){var r,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="https://".concat(e,"/sdk/config/").concat(this.token),t.next=4,w.a.get(r,{query:{t:(new Date).getTime().toString(),preview:"1"}});case 4:if((n=t.sent).ok){t.next=13;break}return t.t0=Error,t.t1="Request failed, status: ".concat(n.status,", body: "),t.next=10,n.text();case 10:throw t.t2=t.sent,t.t3=t.t1+t.t2,new t.t0(t.t3);case 13:return t.t4=this,t.next=16,n.json();case 16:return t.t5=t.sent,t.next=19,t.t4.bootstrap.call(t.t4,t.t5);case 19:t.next=24;break;case 21:t.prev=21,t.t6=t.catch(0),N.error("Failed to load configuration for preview",{err:t.t6});case 24:case"end":return t.stop()}},t,this,[[0,21]])}));return function(e){return t.apply(this,arguments)}}()},{key:"platformInit",value:function(){var t=Object(c.a)(a.a.mark(function t(e){var r,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isEditOrPreviewMode()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.getPlatformInitAuthData(e);case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,ot({sdkHost:this.sdkHost,token:this.token,revision:null!=="c6af9b8"?"c6af9b8":"",referrer:mt.get("referrer")||{},visitorId:mt.get("visitorId")||"",authParams:r});case 9:if(n=t.sent){t.next=12;break}return t.abrupt("return");case 12:if(!this.lion){t.next=15;break}return this.lion.setCustomerAndAuthPacket(n),t.abrupt("return");case 15:this.customer=n.customer,this.authPacket=n.authPacket;case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getPlatformInitAuthData",value:function(){var t=Object(c.a)(a.a.mark(function t(e){var r,n,o,i,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.customer,o=e.auth,i=null!==(r=Object(v.d)("ll_eid"))&&void 0!==r?r:bt.get("emailTrackingId"),n){t.next=4;break}return t.abrupt("return",i?{emailTrackingId:i}:null);case 4:if(!this.isBigCommerce()){t.next=15;break}if(n.id){t.next=7;break}return t.abrupt("return",null);case 7:if(this.bigCommerceClientId){t.next=9;break}throw new Error("Cannot authenticate with BigCommerce: clientId is missing");case 9:return t.next=11,Rt(this.bigCommerceClientId);case 11:if(c=t.sent){t.next=14;break}return t.abrupt("return",null);case 14:return t.abrupt("return",{customer:n,jwt:c,emailTrackingId:i});case 15:if(o){t.next=18;break}return N.error("Customer was identified, but no auth data was provided",{token:this.token,revision:this.revision}),t.abrupt("return",i?{emailTrackingId:i}:null);case 18:return t.abrupt("return",{auth:o,customer:n,emailTrackingId:i});case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"assertCorrectConfig",value:function(){var t=Object(c.a)(a.a.mark(function t(e){var r,n,o,i,c,s,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;break;case 2:if(e&&e.config&&e.config.api||N.error("Invalid bootstrap data shape",{fingerprintType:"message",location:"beginning of assertCorrectConfig",data:e}),r=Kt(e),n=parseInt("8650",10),!(r>=n)){t.next=7;break}return t.abrupt("return",e);case 7:return o=Ft(new Date,"YYYYMMDDHH"),t.prev=8,i="https://".concat(e.config.sdkHost,"/sdk/config/").concat(this.token),t.next=12,w.a.get(i,{query:{t:o,build:n.toString()}});case 12:if((c=t.sent).ok){t.next=21;break}return t.t0=W,t.t1="Request failed with status code ".concat(c.status,", error: "),t.next=18,c.text();case 18:throw t.t2=t.sent,t.t3=t.t1.concat.call(t.t1,t.t2),new t.t0(t.t3);case 21:return t.next=23,c.json();case 23:return(s=t.sent)&&s.config&&s.config.api&&s.config.sdkHost||N.error("Invalid bootstrap data shape",{fingerprintType:"message",location:"after refreshing data from /sdk/config",response:c,request_url:i,data:s}),(u=Kt(s))<n&&J.a.track(Bt({name:"reloaded_config_out_of_date",site_id:s.site.id,client_revision:this.revision},s.config.api?{api_revision:s.config.api.revision}:{},{minimum_api_build:n,previous_api_build:r,new_api_build:u})),t.abrupt("return",s);case 30:if(t.prev=30,t.t4=t.catch(8),!(t.t4 instanceof W)){t.next=34;break}throw t.t4;case 34:throw new W("".concat(t.t4));case 35:case"end":return t.stop()}},t,this,[[8,30]])}));return function(e){return t.apply(this,arguments)}}()},{key:"createLionInstance",value:function(t){var e=window.__LION_CREATE_FN__;t&&t.config&&t.config.api&&t.config.sdkHost||N.error("Invalid bootstrap data shape",{fingerprintType:"message",location:"beginning of createLionInstance",data:t});var r=t.config,n=(null==r?void 0:r.api)?r.api.revision:null;if("function"==typeof e){var o=e(this.token,this.revision,this.themeManifest,mt.data,bt.data,this.fontManifest);if(o){this.lion=o,window.loyaltylion=o,window.lion&&window.lion.isLoyaltyLion&&(window.lion=o);try{this.bufferedClientConfiguration.forEach(function(t){return o.configure(t)}),this.bufferedEventListeners.forEach(function(t){var e=V(t,3),r=e[0],n=e[1],i=e[2];return o.on(r,n,i)}),this.bufferedClientCartStates.forEach(function(t){o.setCartState(t)})}catch(t){N.error("Failed to apply buffer to Lion instance",{err:t,token:this.token,revision:this.revision,apiRevision:n})}try{o.start({authPacket:this.authPacket,customer:this.customer,data:t})}catch(t){N.error("Failed to start Lion instance",{err:t,token:this.token,revision:this.revision,apiRevision:n,fingerprintType:"message"})}}}else this.sdkHost&&J.a.track(Bt({name:"js-execute-fail",site_id:t.site.id,client_revision:this.revision},n?{api_revision:n}:{}))}},{key:"loadStyles",value:function(){var t=Object(c.a)(a.a.mark(function t(e,r){var n,o,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.bufferedClientConfiguration.some(function(t){return Boolean(t.disableBundledCSS)})){t.next=3;break}return t.abrupt("return");case 3:if(!r.site.settings.useAppTurnkey){t.next=5;break}return t.abrupt("return");case 5:return n=r.site,o=Pt("default",this.themeManifest.default,e,this.token,n.meta.loyaltyPanelCustomisationDigest),i=n.settings.loyaltyPanel.customCSSDigest,t.next=10,Promise.all([Lt(o),i?At(e,this.token,"panel",i):Promise.resolve()]);case 10:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"loadFonts",value:function(t){this.bufferedClientConfiguration.some(function(t){return Boolean(t.disableBundledFonts)})||t.site.settings.useAppTurnkey||_t("https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700").catch(function(t){N.warn("Failed to load bundled fonts",{err:t})})}},{key:"loadBundles",value:function(){var t=Object(c.a)(a.a.mark(function t(e,r){var n,o,i,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=["/static/2/vendor-core-019f1ec.js","/static/2/lion-core-e6ccd85.js"],o=["/static/2/lion-app-integrated-d387570.js"],i=["/static/2/lion-app-turnkey-eaec217.js","/static/2/vendor-styled-4d95efb.js"],s=r.site.settings.useAppTurnkey?[].concat(n,i):[].concat(n,o),t.next=6,Promise.all(s.map(function(){var t=Object(c.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return N.error("Blank bundle name",{site:{id:r.site.id,domain:r.site.domain,turnkey:r.site.settings.useAppTurnkey}}),t.abrupt("return");case 3:return t.abrupt("return",xt("https://".concat(e)+n));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"isBigCommerce",value:function(){return!!this.platform&&"bigcommerce"===this.platform}},{key:"isEditOrPreviewMode",value:function(){return Boolean(window.__LION_EDIT_MODE__)||this.setupPreviewEnabled}}]),t}();function Kt(t){var e,r=t.config.api;return r&&null!==(e=r.build)&&void 0!==e?e:0}function Ht(t){if(/loyaltylion\.com/i.test(t.filename)){var e=t.error;if(e)e instanceof Error?N.error("Window error",{err:e,event:t,revision:"c6af9b8"}):N.error("Window error (unknown error object): ".concat(e.message?e.message:""),{event:t,revision:"c6af9b8"});else{if(/Script error/.test(t.message))return;N.error("CORS occluded error: ".concat(t.message),{event:t,revision:"c6af9b8"})}}}function Gt(t,e,r){"ResourceLoadError"!==t.name&&N.error("Failed to bootstrap",{err:t,token:e,revision:r,consoleMessage:"Failed to bootstrap ".concat(t.name?"(".concat(t.name,")"):""),fingerprintType:"message"})}function qt(t){return q(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||z()}function zt(t,e){var r=new St;return e.forEach(function(t){var e=qt(t),n=e[0],o=e.slice(1);switch(n){case"identify_customer":r.setCustomerData(o[0]).catch(function(t){N.error("Legacy `identify_customer` failed",{err:t})});break;case"auth_customer":r.setAuthData(o[0]).catch(function(t){N.error("Legacy `auth_customer` failed",{err:t})})}}),{token:t,auth:r.authData||void 0,customer:r.customerData||void 0}}function Vt(){var t,e,r=window,n=r.loyaltylion,o=r.lion;if(null==n?void 0:n.isLoyaltyLion){if("object"!==u(n._initData))throw new G;return new Yt(n)}if(f(o)){if(o._emulated)throw new G;return new Yt({_buffer:(e=t=o,e.map(function(t){var e=qt(t),r=e[0],n=e.slice(1);return[r,n]}).filter(function(t){var e=V(t,1),r=e[0];return"identify_customer"!==r&&"auth_customer"!==r})),_initData:zt(t._token,t)})}throw new H}o.a.polyfill(),function(){var t;if(!/(AdsBot-Google|Wappalyzer|Yahoo Ad)/i.test(window.navigator.userAgent))if("object"!==u(t=window.lion)||"function"!=typeof t._set_configuration)try{var e=Vt();window.loyaltylion=e,(f(window.lion)||window.lion&&window.lion.isLoyaltyLion)&&(window.lion=e),e.start()}catch(t){"DuplicateLoaderError"===t.name?N.warn("It looks like LoyaltyLion is being loaded twice. This won't break anything, but will make things slightly slower. Please ensure you have only one instance of the LoyaltyLion SDK snippet on the page"):N.warn("Could not start the LoyaltyLion SDK. Please ensure the LoyaltyLion SDK snippet has been configured correctly",t)}else N.info("Legacy SDK already loaded, exiting...")}()}]);